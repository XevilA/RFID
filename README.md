# RFID Access Control System

เอกสารนี้อธิบายวิธีการตั้งค่าและติดตั้งฮาร์ดแวร์สำหรับระบบควบคุมการเข้าออกโดยใช้ RFID และ NodeMCU พร้อมการแจ้งเตือนผ่าน Line Notify

## 1. อุปกรณ์ที่ต้องใช้

### อุปกรณ์หลัก

- **NodeMCU ESP8266** - ใช้สำหรับควบคุมระบบและการสื่อสาร WiFi

- **RFID-RC522** - โมดูลอ่านบัตร RFID

- **Relay Module** - สำหรับควบคุมโซลินอยด์ล็อค

- **Buzzer** - สำหรับเสียงแจ้งเตือน

- **สาย Dupont** - สำหรับเชื่อมต่อวงจร

- **โซลินอยด์ล็อค**

- **แหล่งจ่ายไฟ 5V**

### ซอฟต์แวร์ที่ต้องใช้

- Arduino IDE - ใช้สำหรับเขียนโปรแกรมและอัปโหลดไปยัง NodeMCU

- ไลบรารีเพิ่มเติม:

  - `SPI.h`

  - `MFRC522.h`

  - `ESP8266WiFi.h`

  - `WiFiClientSecure.h`

## 2. การต่อวงจร

| NodeMCU Pin | อุปกรณ์       | หมายเหตุ              |

|-------------|----------------|-----------------------|

| D3          | RST (RFID)    | ขารีเซ็ตโมดูล RFID   |

| D4          | SDA (RFID)    | ขาสำหรับสื่อสาร SPI  |

| D1          | Relay Module  | ควบคุมโซลินอยด์ล็อค |

| D2          | Buzzer        | สำหรับเสียงแจ้งเตือน |

| 3V3         | VCC (RFID)    | จ่ายไฟให้โมดูล RFID  |

| GND         | GND (RFID)    | เชื่อมต่อกราวด์      |

### รูปแบบการต่อสาย

1\. เชื่อมต่อสาย Dupont ตามตารางด้านบน

2\. ต่อ Relay Module กับโซลินอยด์ล็อค (Relay ควบคุมวงจรไฟของโซลินอยด์)

3\. ต่อ Buzzer เข้ากับ D2 และ GND

## 3. การตั้งค่าโปรแกรม

### ขั้นตอนการติดตั้งไลบรารี

1\. เปิด Arduino IDE

2\. ไปที่ **Sketch** > **Include Library** > **Manage Libraries...**

3\. ค้นหาและติดตั้งไลบรารีดังนี้:

   - `MFRC522` (สำหรับโมดูล RFID-RC522)

   - `ESP8266WiFi` (สำหรับการเชื่อมต่อ WiFi)

### การตั้งค่า WiFi และ Token

แก้ไขข้อมูลในโค้ดดังนี้:

```cpp

const char *ssid = "your_wifi_name";          // ชื่อ WiFi ของคุณ

const char *password = "your_wifi_password";  // รหัสผ่าน WiFi

const char *lineToken = "your_line_notify_token"; // Token ของ Line Notify

```

### อัปโหลดโปรแกรม

1\. เชื่อมต่อ NodeMCU เข้ากับคอมพิวเตอร์ผ่านสาย USB

2\. เลือกบอร์ด **NodeMCU 1.0 (ESP-12E Module)** และพอร์ตที่ถูกต้องใน **Tools**

3\. อัปโหลดโปรแกรมไปยัง NodeMCU

## 4. การใช้งาน

1\. เมื่อเปิดระบบ โมดูล RFID จะเริ่มทำงานและรอการแตะบัตร

2\. หากบัตรที่แตะมี UID ตรงกับที่ตั้งค่าไว้ในโปรแกรม:

   - รีเลย์จะทำงานเพื่อปลดล็อคโซลินอยด์

   - Buzzer จะส่งเสียงแจ้งเตือน

   - ข้อมูลการเข้าถึง (ชื่อ, นามสกุล, เวลา) จะถูกส่งไปยัง Line Notify

3\. หาก UID ไม่ตรง ระบบจะส่งเสียงแจ้งเตือน (Buzzer ดัง 3 ครั้ง)

## 5. ข้อควรระวัง

- ตรวจสอบการต่อวงจรก่อนจ่ายไฟทุกครั้ง

- ใช้แหล่งจ่ายไฟที่เหมาะสมสำหรับโซลินอยด์ล็อค

- หลีกเลี่ยงการสัมผัสวงจรด้วยมือเปล่าระหว่างการทำงาน

## 6. การแก้ไขปัญหา

### ปัญหา: ไม่สามารถเชื่อมต่อ WiFi ได้

- ตรวจสอบชื่อและรหัสผ่าน WiFi ว่าถูกต้อง

- ตรวจสอบว่าเราเตอร์เปิดใช้งานอยู่

### ปัญหา: โมดูล RFID ไม่อ่านบัตร

- ตรวจสอบการต่อสาย SDA, SCK, MOSI, MISO, RST

- ตรวจสอบว่าบัตร RFID อยู่ใกล้โมดูล

### ปัญหา: Line Notify ไม่ทำงาน

- ตรวจสอบว่า Token ถูกต้อง

- ตรวจสอบสถานะ WiFi ของ NodeMCU

---

เอกสารนี้เหมาะสำหรับผู้เริ่มต้นและผู้ที่ต้องการติดตั้งระบบควบคุมการเข้าออกด้วย RFID หากมีคำถามเพิ่มเติม สามารถสอบถามได้!
